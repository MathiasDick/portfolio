---
import "../styles/global.css";

interface Props {
  title?: string | undefined;
  description?: string | undefined;
}

const {
  title = "Mathias Dick - Software Engineer, Mechanic & Electronics Specialist | Portfolio",
  description = "Mathias Dick is a Dual Student at Mercedes-Benz and Multidisciplinary Engineer specializing in software development, mechanical engineering, and electronics. Based in Rastatt, Germany.",
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<meta name="generator" content={Astro.generator} />

<!-- Primary Meta Tags -->
<title>{title}</title>
<meta name="title" content={title} />
<meta name="description" content={description} />
<meta name="author" content="Mathias Dick" />
<meta
  name="keywords"
  content="Mathias Dick, Software Engineer, Mechanical Engineer, Electronics, Mercedes-Benz, Dual Student, Portfolio, Rastatt, Germany"
/>
<link rel="canonical" href={canonicalURL} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content={canonicalURL} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content="/assets/portrait.jpg" />
<meta property="og:locale" content="en_US" />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={canonicalURL} />
<meta property="twitter:title" content={title} />
<meta property="twitter:description" content={description} />
<meta property="twitter:image" content="/assets/portrait.jpg" />

<!-- Structured Data -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Mathias Dick",
    "jobTitle": "Software Engineer & Dual Student",
    "worksFor": {
      "@type": "Organization",
      "name": "Mercedes-Benz"
    },
    "description": "Multidisciplinary Engineer specializing in software development, mechanical engineering, and electronics",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Rastatt",
      "addressCountry": "Germany"
    },
    "url": "https://mathiasd.de",
    "image": "/assets/portrait.jpg",
    "sameAs": [
      "https://github.com/MathiasDick",
      "https://www.linkedin.com/in/mathias-dick-506701183/"
    ],
    "knowsAbout": [
      "Software Engineering",
      "Mechanical Engineering",
      "Electronics",
      "Python",
      "Astro",
      "Web Development"
    ]
  }
</script>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
<link rel="manifest" href="/site.webmanifest" />
<script is:inline>
  // This code is inlined in the head to make dark mode instant & blocking.
  const getThemePreference = () => {
    if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
      return localStorage.getItem("theme");
    }
    return window.matchMedia("(prefers-color-scheme: dark)").matches
      ? "dark"
      : "light";
  };
  const isDark = getThemePreference() === "dark";
  document.documentElement.classList[isDark ? "add" : "remove"]("theme-dark");

  if (typeof localStorage !== "undefined") {
    // Watch the document element and persist user preference when it changes.
    const observer = new MutationObserver(() => {
      const isDark = document.documentElement.classList.contains("theme-dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    });
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ["class"],
    });
  }
</script>
